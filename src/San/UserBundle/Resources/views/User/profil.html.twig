{% extends "SanCoreBundle::layoutpages.html.twig" %}

{% block title %}
  Profil Utilisateur - {{ parent() }}
{% endblock %}

{% block body %}

 
 
 {% for flash_message in app.session.flashBag.get('notice') %}
    <div class="flash-notice">
        {{ flash_message }}
    </div>
{% endfor %}
{% for flash_message in app.session.flashBag.get('info') %}
    <div class="flash-notice">
        {{ flash_message }}
    </div>
{% endfor %}
  <div class="row">
    <div class="col-md-8">  
        <div class="panel panel-primary">
  <div class="panel-heading profil"> 
     {{ user.prenom }} {{ user.nom }}
     </div>
  <div class="panel-body">
   <i>Inscription le {{ user.dateInsc|date('d/m/Y') }} et Modification le {{ user.dateMod|date('d/m/Y') }}</i>    
      <table class="table table-striped">
          <tr><td>UserName</td><td>{{ user.username }}<td></tr>
        <tr><td>Adresse email</td><td>{{ user.email }}<td></tr>
        <tr><td>Société</td><td>{{ user.societe }}<td></tr>
        <tr><td>Téléphone</td><td>{{ user.telephone }}<td></tr>
        <tr><td>Portable</td><td>{{ user.portable }}<td></tr>
        
    </table>
  </div>
</div>
    
    </div>
    {% if user.imageName is not null %}
  <div class="col-md-4">
       <img src="{{ vich_uploader_asset(user, 'imageFile') }}" alt="{{ user.imageName }}" width="200px">
       <p><br/> <a href="{{ path('san_user_edit', {'id': user.id}) }}" class="btn btn-info">
      <i class="glyphicon glyphicon-edit"></i>
      Modifier votre profil
           </a></p></div>
{% endif %}
    </div>
    
     <div class="panel panel-primary">
  <div class="panel-heading">Candidatures</div>
  <div class="panel-body">
 {% if not user.candidatures.empty %}
      <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <th>Postulé le</th>
        <th>Titre de l'offre</th>
        <th>Statut</th>
      </tr>
    </thead>
    <tbody>
    {% for candidature in user.candidatures %}
         <tr>
             <td>{{ candidature.pubdate|date('d/m/Y') }}</td>
             <td><a href="{{ path('san_offre_offre', {'id': candidature.offre.id}) }}">{{ candidature.offre.titre }}</a></td>
        <td>{{ candidature.statut.nom }}</td>
         </tr>
    {% endfor %}
    </tbody>
  </table>    
{% endif %}

  </div>
   </div>

 <div class="row">
    <div class="col-md-6">  
     <div class="panel panel-primary">
  <div class="panel-heading">Abonnement à la newsletter</div>
  <div class="panel-body">
 {% if user.abonewsletter %}
                Vous êtes abonné(e) à la newsletter - <a href="{{ path('san_newsletter_abo') }}"><i class="glyphicon glyphicon-remove" style='color:red;'></i></a> 
            {% else %}
                Vous n'êtes pas encore abonné(e) à la newsletter. - <a href="{{ path('san_newsletter_abo') }}" class="btn btn-success">Je m'abonne !</a> 
            {% endif%}
  </div>
   </div>
    </div>
   <div class="col-md-6">  
  <div class="panel panel-primary">
  <div class="panel-heading">Inscription aux évènements</div>
  <div class="panel-body">
 {% if listInscriptions %}
     <table class="table table-striped">
    {% for inscription in listInscriptions %}
        <tr>
        <td>{{ inscription.event.titre }}
        - <a href="{{ path('san_insc_deletepub', {'id': inscription.id}) }}"><i class="glyphicon glyphicon-remove" style='color:red;'></i></a> 
        </td>
        </tr>
    {% endfor %}
      </table>
{% endif %}
  </div>
   </div>
  </div>
    </div>

  <p>
    
    <a href="{{ path('san_user_edit', {'id': user.id}) }}" class="btn btn-default">
      <i class="glyphicon glyphicon-edit"></i>
      Modifier l'utilisateur
    </a>
    <a href="{{ path('san_user_delete', {'id': user.id}) }}" class="btn btn-danger">
      <i class="glyphicon glyphicon-trash"></i>
      Supprimer l'utilisateur
    </a>
  </p>

{% endblock %}
