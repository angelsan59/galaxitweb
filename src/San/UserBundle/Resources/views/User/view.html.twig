{% extends "SanAdminBundle::layout.html.twig" %}

{% block title %}
  Utilisateur - {{ parent() }}
{% endblock %}

{% block body %}

  <h2>{{ user.nom }} - {{ user.prenom }}</h2>
  <i>Inscription le {{ user.dateInsc|date('d/m/Y') }} et Modification le {{ user.dateMod|date('d/m/Y') }}</i>
 {% for flash_message in app.session.flashBag.get('notice') %}
    <div class="flash-notice">
        {{ flash_message }}
    </div>
{% endfor %}
  <div class="row">
    <div class="col-md-6 well">  
    <ul>
        <li>UserName : {{ user.username }}</li>
        <li>{% for role in user.roles %}
           {% if role =='ROLE_ADMIN' %} Administrateur 
           {% endif %}  
           
                - <a href="{{ path('san_user_admin', {'id': user.id}) }}">Donner le rôle d'admin</a>
            {% endfor %}</li>
        <li>Adresse email : {{ user.email }}</li>
        <li>Société : {{ user.societe }}</li>
        <li>Téléphone : {{ user.telephone }}</li>
        <li>Portable : {{ user.portable }}</li>
    </ul> 
    
     {% if user.dateRdv is not null %}
         <div class="alert alert-danger"><b>Rendez vous le   {{ user.dateRdv|date('d/m/Y H:i') }}</b></div>
    {% endif %}
    </div>
    {% if user.imageName is not null %}
  <div class="col-md-6">
       <img src="{{ vich_uploader_asset(user, 'imageFile') }}" alt="{{ user.imageName }}" width="200px">
  </div>
{% endif %}
    </div>
   <!-- Panel Candidatures --> 
     <div class="panel panel-primary">
  <div class="panel-heading">Candidatures</div>
  <div class="panel-body">
 {% if not user.candidatures.empty %}
      <table class="table table-striped table-responsive">
    <thead>
      <tr>
        <th>Postulé le</th>
        <th>Candidature</th>
        <th></th>
        <th>Titre de l'offre</th>
        <th>Statut</th>
      </tr>
    </thead>
    <tbody>
    {% for candidature in user.candidatures %}
         <tr>
             <td>{{ candidature.pubdate|date('d/m/Y') }}</td>
             <td><a href="{{ path('san_candidats_view', {'id': candidature.id}) }}">voir les détails</a></td>
           <td><a href="{{ path('san_candidats_edit', {'id': candidature.id}) }}" class="btn btn-info btn-xs">
      <i class="glyphicon glyphicon-edit"></i>
      Modifier
           </a> <a href="{{ path('san_candidats_delete', {'id': candidature.id}) }}" class="btn btn-danger btn-xs">
      <i class="glyphicon glyphicon-remove"></i>
      Supprimer
           </a></td>
             <td><a href="{{ path('san_offre_offre', {'id': candidature.offre.id}) }}">{{ candidature.offre.titre }}</a></td>
        <td>{{ candidature.statut.nom }}</td>
         </tr>
    {% endfor %}
    </tbody>
  </table>  
    
    {% else %}
        pas encore de candidature
{% endif %}

  </div>
   </div>   

  <p>
    
    <a href="{{ path('san_user_edit', {'id': user.id}) }}" class="btn btn-default">
      <i class="glyphicon glyphicon-edit"></i>
      Modifier l'utilisateur
    </a>
    <a href="{{ path('san_user_delete', {'id': user.id}) }}" class="btn btn-danger">
      <i class="glyphicon glyphicon-trash"></i>
      Supprimer l'utilisateur
    </a>
  </p>

{% endblock %}
